<nav class="bg-white shadow-md fixed w-full top-0 z-50">
  <div class="w-full px-4 md:px-8">
    <div class="flex justify-between h-16">
      <!-- Logo -->
      <div class="flex items-center">
        <a href="/home" class="flex items-center">
          <h1 class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-pink-600 hover:from-indigo-500 hover:to-pink-500 transition duration-300">
            ðŸŽ® GameZone
          </h1>
        </a>
      </div>

      <!-- Desktop Nav -->
      <div class="hidden md:flex items-center space-x-8">
        <% if (page !== 'wishlist' && page !== 'cart' && page !== 'profile' && page !=='orderDetails' && page !=='viewOrder') { %>
        <!-- Search Input Field -->
        <div class="relative">
          <input type="text" placeholder="Search games..." id="searchInput"
            class="w-72 px-4 py-2 rounded-full border border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition duration-200 bg-gray-50">
          <button class="absolute right-3 top-2.5 text-gray-400 hover:text-indigo-600">
            <i class="fas fa-search"></i>
          </button>
        </div>
        <% } %>

        <!-- Dynamic Links -->
        <div class="flex items-center space-x-6">
          <a href="/allgames" class="text-gray-600 hover:text-indigo-600 font-medium">Store</a>
          <a href="/library" class="text-gray-600 hover:text-indigo-600 font-medium">about</a>
          <a href="/wishlist"
            class="inline-flex items-center justify-center w-9 h-9 bg-red-100 text-red-500 hover:bg-red-200 hover:text-red-600 rounded-full transition duration-200 shadow">
            <i class="fas fa-heart text-sm"></i>
          </a>
          <a href="/cart" class="relative group">
            <i class="fas fa-shopping-cart text-gray-600 hover:text-indigo-600 text-xl"></i>
            <% if (typeof cartCount !== 'undefined' && cartCount > 0) { %>
            <span
              class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full px-1.5 py-0.5 shadow-md">
              <%= cartCount %>
            </span>
            <% } %>
          </a>

          <!-- Profile Dropdown -->
          <div class="relative">
            <button id="profileDropdownBtn"
              class="flex items-center space-x-2 text-gray-600 hover:text-indigo-600 focus:outline-none">
              <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="Profile"
                class="w-8 h-8 rounded-full border-2 border-gray-200">
              <span class="font-medium">Profile</span>
              <i class="fas fa-chevron-down text-xs transition-transform duration-200"></i>
            </button>

            <div id="profileDropdown"
              class="absolute right-0 mt-2 w-52 bg-white rounded-xl shadow-xl py-2 opacity-0 invisible transition-all duration-200 z-50">
              <a href="/profile"
                class="flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-indigo-100 hover:text-indigo-700 transition rounded-md">
                <i class="fas fa-user text-base"></i>
                <span class="text-sm font-medium">My Profile</span>
              </a>
              <a href="/orders"
                class="flex items-center gap-2 px-4 py-2 text-gray-700 hover:bg-indigo-100 hover:text-indigo-700 transition rounded-md">
                <i class="fas fa-shopping-bag text-base"></i>
                <span class="text-sm font-medium">Orders</span>
              </a>
              <a href="/wishlist"
                class="flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-100 hover:text-red-700 transition rounded-md">
                <i class="fas fa-heart text-base"></i>
                <span class="text-sm font-medium">Wishlist</span>
              </a>
              <hr class="my-2 border-gray-200">
              <a href="/logout"
                class="flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-100 hover:text-red-700 transition rounded-md">
                <i class="fas fa-sign-out-alt text-base"></i>
                <span class="text-sm font-medium">Logout</span>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Mobile Button -->
      <div class="flex items-center md:hidden">
        <button id="mobileMenuBtn" class="text-gray-600 hover:text-indigo-600 focus:outline-none">
          <i class="fas fa-bars text-2xl"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Nav -->
  <div id="mobileMenu" class="hidden md:hidden bg-white border-t border-gray-100">
    <div class="px-4 py-3">
      <% if (page !== 'wishlist' && page !== 'cart' && page !== 'profile') { %>
      <div class="relative">
        <input type="text" placeholder="Search games..." id="searchInput"
          class="w-full px-4 py-2 rounded-full border border-gray-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition duration-200 bg-gray-50">
        <button class="absolute right-3 top-2.5 text-gray-400 hover:text-indigo-600">
          <i class="fas fa-search"></i>
        </button>
      </div>
      <% } %>
      <a href="/store" class="block py-2 text-gray-600 hover:text-indigo-600 font-medium">Store</a>
      <a href="/library" class="block py-2 text-gray-600 hover:text-indigo-600 font-medium">Library</a>
      <a href="/wishlist" class="block py-2 text-gray-600 hover:text-indigo-600 font-medium">Wishlist</a>
      <a href="/cart" class="block py-2 text-gray-600 hover:text-indigo-600 font-medium">Cart</a>
      <a href="/profile" class="block py-2 text-gray-600 hover:text-indigo-600 font-medium">Profile</a>
      <a href="/orders" class="block py-2 text-gray-600 hover:text-indigo-600 font-medium">Orders</a>
      <hr class="my-2 border-gray-100">
      <a href="/logout" class="block py-2 text-red-600 hover:text-red-700 font-medium">Logout</a>
    </div>
  </div>

  <script>
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    mobileMenuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });

    const profileBtn = document.getElementById('profileDropdownBtn');
    const profileMenu = document.getElementById('profileDropdown');
    profileBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      profileMenu.classList.toggle('invisible');
      profileMenu.classList.toggle('opacity-0');
      profileMenu.classList.toggle('opacity-100');
      profileMenu.classList.toggle('visible');
    });
    document.addEventListener('click', (e) => {
      if (!profileMenu.contains(e.target) && !profileBtn.contains(e.target)) {
        profileMenu.classList.add('invisible');
        profileMenu.classList.add('opacity-0');
        profileMenu.classList.remove('opacity-100');
        profileMenu.classList.remove('visible');
      }
    });
  </script>

  <script src="/js/filterFunc.js" defer></script>
  <script src="/js/homeSearchjs" defer></script>
</nav>
<div class="pt-20 md:pt-10"></div>